<Window x:Class="MoneyTracker.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Копилка - Финансовый трекер" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ШАПКА -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="💰 КОПИЛКА" 
                               FontSize="28" 
                               FontWeight="Bold" 
                               Foreground="White"/>
                    <TextBlock Text="Управление личными финансами" 
                               FontSize="16" 
                               Foreground="#E3F2FD"/>
                </StackPanel>

                <!-- БАЛАНС В ШАПКЕ -->
                <Border Grid.Column="1" 
                        Background="White" 
                        CornerRadius="10" 
                        Padding="15 10">
                    <StackPanel>
                        <TextBlock Text="БАЛАНС" 
                                   FontSize="12" 
                                   Foreground="#666"/>
                        <TextBlock x:Name="txtBalance" 
                                   Text="0 ₽" 
                                   FontSize="24" 
                                   FontWeight="Bold"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- ОСНОВНОЕ СОДЕРЖИМОЕ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- ЛЕВАЯ ПАНЕЛЬ - МЕНЮ -->
            <Border Grid.Column="0" Background="#F5F5F5" Padding="15">
                <StackPanel>
                    <TextBlock Text="УПРАВЛЕНИЕ" 
                               FontWeight="Bold" 
                               FontSize="16"
                               Margin="0 0 0 15"/>

                    <Button x:Name="btnAddIncome" 
                            Content="➕ Добавить доход" 
                            Background="#4CAF50"
                            Height="40"/>

                    <Button x:Name="btnAddExpense" 
                            Content="➖ Добавить расход" 
                            Background="#F44336"
                            Height="40"
                            Margin="0 10 0 0"/>

                    <Separator Margin="0 20"/>

                    <TextBlock Text="СТАТИСТИКА" 
                               FontWeight="Bold"
                               Margin="0 0 0 10"/>

                    <StackPanel>
                        <!-- ИЗМЕНИЛ: txtIncomeTotal вместо txtIncome -->
                        <TextBlock x:Name="txtIncomeTotal" 
                                   Text="Доходы: 0 ₽" 
                                   Foreground="#4CAF50"
                                   FontWeight="SemiBold"/>
                        <!-- ИЗМЕНИЛ: txtExpenseTotal вместо txtExpense -->
                        <TextBlock x:Name="txtExpenseTotal" 
                                   Text="Расходы: 0 ₽" 
                                   Foreground="#F44336"
                                   FontWeight="SemiBold"
                                   Margin="0 5 0 0"/>
                        <TextBlock x:Name="txtTransactionCount" 
                                   Text="Операций: 0" 
                                   Foreground="#666"
                                   Margin="0 10 0 0"/>
                    </StackPanel>

                    <Separator Margin="0 20"/>

                    <Button x:Name="btnGoals" 
                            Content="🎯 Цели" 
                            Background="#E3F2FD"
                            Height="35"/>

                    <Button x:Name="btnReports" 
                            Content="📊 Отчёты" 
                            Background="#E3F2FD"
                            Height="35"
                            Margin="0 5 0 0"/>

                    <Button x:Name="btnSettings" 
                            Content="⚙ Настройки" 
                            Background="#E3F2FD"
                            Height="35"
                            Margin="0 5 0 0"/>
                </StackPanel>
            </Border>

            <!-- ПРАВАЯ ПАНЕЛЬ - СПИСОК ТРАНЗАКЦИЙ -->
            <Border Grid.Column="1" Padding="20">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- ЗАГОЛОВОК СПИСКА -->
                    <Border Grid.Row="0" 
                            Background="#E3F2FD" 
                            CornerRadius="5" 
                            Padding="15"
                            Margin="0 0 0 15">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📋 ПОСЛЕДНИЕ ОПЕРАЦИИ" 
                                       FontSize="16" 
                                       FontWeight="Bold"/>
                            <Button x:Name="btnRefresh" 
                                    Content="🔄 Обновить" 
                                    Background="Transparent" 
                                    Foreground="#2196F3"
                                    BorderThickness="0"
                                    Margin="20 0 0 0"/>
                        </StackPanel>
                    </Border>

                    <!-- СПИСОК ТРАНЗАКЦИЙ -->
                    <ListView x:Name="lstTransactions" 
                              Grid.Row="1"
                              BorderThickness="0">
                        <ListView.View>
                            <GridView>
                                <!-- ДАТА -->
                                <GridViewColumn Header="Дата" Width="100">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding DateFormatted}"
                                                       VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- ТИП -->
                                <GridViewColumn Header="Тип" Width="80">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Type}" 
                                                       FontWeight="Bold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Type}" Value="Income">
                                                                <Setter Property="Foreground" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Type}" Value="Expense">
                                                                <Setter Property="Foreground" Value="#F44336"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- КАТЕГОРИЯ -->
                                <GridViewColumn Header="Категория" Width="120">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Category}" VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- ОПИСАНИЕ -->
                                <GridViewColumn Header="Описание" Width="250">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Description}" 
                                                       TextWrapping="Wrap"
                                                       VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- СУММА -->
                                <GridViewColumn Header="Сумма" Width="100">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding AmountFormatted}" 
                                                       FontWeight="Bold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Type}" Value="Income">
                                                                <Setter Property="Foreground" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Type}" Value="Expense">
                                                                <Setter Property="Foreground" Value="#F44336"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>

                        <!-- СТИЛЬ ДЛЯ ПУСТОГО СПИСКА -->
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Padding" Value="10 8"/>
                                <Setter Property="BorderThickness" Value="0 0 0 1"/>
                                <Setter Property="BorderBrush" Value="#EEEEEE"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                </Grid>
            </Border>
        </Grid>

        <!-- ПОДВАЛ -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="10">
            <TextBlock Text="💰 Копилка v1.0 | Учебный проект по ООП | Паттерны: Singleton, Abstract Factory" 
                       HorizontalAlignment="Center" 
                       Foreground="#666"/>
        </Border>
        <!-- Статус бар -->
        <StatusBar Grid.Row="2" Background="#F5F5F5" Height="25">
            <StatusBarItem>
                <TextBlock x:Name="txtStatus" Text="Готово" Foreground="#666"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>