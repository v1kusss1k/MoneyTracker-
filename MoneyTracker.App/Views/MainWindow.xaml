<Window x:Class="MoneyTracker.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Копилка - Финансовый трекер" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ШАПКА -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="💰 КОПИЛКА" 
                               FontSize="28" 
                               FontWeight="Bold" 
                               Foreground="White"/>
                    <TextBlock Text="Управление личными финансами" 
                               FontSize="16" 
                               Foreground="#E3F2FD"/>
                </StackPanel>

                <!-- БАЛАНС В ШАПКЕ -->
                <Border Grid.Column="1" 
                        Background="White" 
                        CornerRadius="10" 
                        Padding="15 10">
                    <StackPanel>
                        <TextBlock Text="БАЛАНС" 
                                   FontSize="12" 
                                   Foreground="#666"/>
                        <TextBlock x:Name="txtBalance" 
                                   Text="0 ₽" 
                                   FontSize="24" 
                                   FontWeight="Bold"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- ОСНОВНОЕ СОДЕРЖИМОЕ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- ЛЕВАЯ ПАНЕЛЬ - МЕНЮ -->
            <Border Grid.Column="0" Background="#F5F5F5" Padding="15">
                <StackPanel>
                    <TextBlock Text="УПРАВЛЕНИЕ" 
                               FontWeight="Bold" 
                               FontSize="16"
                               Margin="0 0 0 15"/>

                    <Button x:Name="btnAddIncome" 
                            Content="➕ Добавить доход" 
                            Background="#4CAF50"
                            Foreground="White"
                            Height="40"/>

                    <Button x:Name="btnAddExpense" 
                            Content="➖ Добавить расход" 
                            Background="#F44336"
                            Foreground="White"
                            Height="40"
                            Margin="0 10 0 0"/>

                    <Separator Margin="0 20"/>

                    <TextBlock Text="СТАТИСТИКА" 
                               FontWeight="Bold"
                               Margin="0 0 0 10"/>

                    <StackPanel>
                        <TextBlock x:Name="txtIncomeTotal" 
                                   Text="Доходы: 0 ₽" 
                                   Foreground="#4CAF50"
                                   FontWeight="SemiBold"/>
                        <TextBlock x:Name="txtExpenseTotal" 
                                   Text="Расходы: 0 ₽" 
                                   Foreground="#F44336"
                                   FontWeight="SemiBold"
                                   Margin="0 5 0 0"/>
                        <TextBlock x:Name="txtTransactionCount" 
                                   Text="Операций: 0" 
                                   Foreground="#666"
                                   Margin="0 10 0 0"/>
                    </StackPanel>

                    <Separator Margin="0 20"/>

                    <Button x:Name="btnGoals" 
                            Content="🎯 Цели" 
                            Background="#FF9800"
                            Foreground="White"
                            Height="35"/>

                    <Button x:Name="btnBudgets" 
                            Content="💰 Бюджеты" 
                            Background="#2196F3"
                            Foreground="White"
                            Height="35"
                            Margin="0 5 0 0"
                            Click="btnBudgets_Click"/>
                    <Button x:Name="btnReports" 
                            Content="📊 Отчёты" 
                            Background="#9C27B0"
                            Foreground="White"
                            Height="35"
                            Margin="0 5 0 0"/>

                    <Button x:Name="btnSettings" 
                            Content="⚙ Настройки" 
                            Background="#607D8B"
                            Foreground="White"
                            Height="35"
                            Margin="0 5 0 0"/>
                </StackPanel>
            </Border>

            <!-- ПРАВАЯ ПАНЕЛЬ - СПИСОК ТРАНЗАКЦИЙ -->
            <Border Grid.Column="1" Padding="20">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- ЗАГОЛОВОК СПИСКА -->
                    <Border Grid.Row="0" 
                            Background="#E3F2FD" 
                            CornerRadius="5" 
                            Padding="15"
                            Margin="0 0 0 15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Orientation="Horizontal">
                                <TextBlock Text="📋 ПОСЛЕДНИЕ ОПЕРАЦИИ" 
                                           FontSize="16" 
                                           FontWeight="Bold"/>
                            </StackPanel>

                            <!-- КНОПКА ОЧИСТИТЬ ВСЕ - СПРАВА -->
                            <Button x:Name="btnClearAll" 
                                    Grid.Column="1"
                                    Content="🗑️ Очистить все"
                                    Background="#F44336"
                                    Foreground="White"
                                    Padding="8 4"
                                    FontSize="12"/>
                        </Grid>
                    </Border>

                    <!-- СПИСОК ТРАНЗАКЦИЙ (ОБНОВЛЕННЫЙ) -->
                    <ListView x:Name="lstTransactions" 
                              Grid.Row="1"
                              BorderThickness="0">

                        <!-- КОНТЕКСТНОЕ МЕНЮ (правый клик) -->
                        <ListView.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="🗑️ Удалить" Click="MenuItemDelete_Click"/>
                                <Separator/>
                                <MenuItem Header="📋 Копировать сумму" Click="MenuItemCopyAmount_Click"/>
                                <MenuItem Header="📋 Копировать описание" Click="MenuItemCopyDescription_Click"/>
                                <Separator/>
                                <MenuItem Header="📊 Детали" Click="MenuItemDetails_Click"/>
                            </ContextMenu>
                        </ListView.ContextMenu>

                        <ListView.View>
                            <GridView>
                                <!-- ДАТА -->
                                <GridViewColumn Header="Дата" Width="100">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding DateFormatted}"
                                                       VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- ТИП -->
                                <GridViewColumn Header="Тип" Width="80">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding TypeDisplay}" 
                                                       FontWeight="Bold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Type}" Value="Income">
                                                                <Setter Property="Foreground" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Type}" Value="Expense">
                                                                <Setter Property="Foreground" Value="#F44336"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- КАТЕГОРИЯ -->
                                <GridViewColumn Header="Категория" Width="120">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Category}" VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- ОПИСАНИЕ -->
                                <GridViewColumn Header="Описание" Width="200">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Description}" 
                                                       TextWrapping="Wrap"
                                                       VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- СУММА -->
                                <GridViewColumn Header="Сумма" Width="100">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding AmountFormatted}" 
                                                       FontWeight="Bold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Type}" Value="Income">
                                                                <Setter Property="Foreground" Value="#4CAF50"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Type}" Value="Expense">
                                                                <Setter Property="Foreground" Value="#F44336"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <!-- КНОПКА УДАЛЕНИЯ (компактная) -->
                                <GridViewColumn Header="" Width="40">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button ToolTip="Удалить транзакцию"
                                                    Content="🗑️"
                                                    FontSize="12"
                                                    Width="30"
                                                    Height="30"
                                                    Padding="0"
                                                    Background="Transparent"
                                                    BorderThickness="0"
                                                    Foreground="#F44336"
                                                    Cursor="Hand"
                                                    Click="BtnDeleteTransaction_Click"
                                                    Tag="{Binding Id}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>

                        <!-- СТИЛЬ ДЛЯ ПУСТОГО СПИСКА -->
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Padding" Value="10 8"/>
                                <Setter Property="BorderThickness" Value="0 0 0 1"/>
                                <Setter Property="BorderBrush" Value="#EEEEEE"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                </Grid>
            </Border>
        </Grid>

        <!-- ПОДВАЛ / СТАТУС БАР -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" 
                           x:Name="txtStatus"
                           Text="Готово" 
                           Foreground="#666"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>