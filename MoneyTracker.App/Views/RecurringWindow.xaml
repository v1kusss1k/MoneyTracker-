<Window x:Class="MoneyTracker.App.Views.RecurringWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="🔄 Регулярные платежи" 
        Height="500" Width="700"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ШАПКА -->
        <Border Grid.Row="0" Background="Teal" Padding="20">
            <StackPanel>
                <TextBlock Text="🔄 РЕГУЛЯРНЫЕ ПЛАТЕЖИ" 
                           FontSize="24" FontWeight="Bold" 
                           Foreground="White"/>
                <TextBlock Text="Автоматическое создание транзакций" 
                           FontSize="14" Foreground="#E0F2F1"/>
            </StackPanel>
        </Border>

        <!-- СПИСОК -->
        <ListView x:Name="lstRecurring" Grid.Row="1" Margin="10">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Background="White" Margin="0,5" Padding="15" CornerRadius="8"
                            BorderBrush="#E0E0E0" BorderThickness="1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- ИНФОРМАЦИЯ -->
                            <StackPanel Grid.Column="0">
                                <!-- ПЕРВАЯ СТРОКА: Иконка + Название + Статус -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock Text="{Binding Icon}" FontSize="20" Margin="0,0,10,0"/>

                                    <TextBlock Text="{Binding Name}" 
                                               FontWeight="Bold" 
                                               FontSize="16"
                                               VerticalAlignment="Center"/>

                                    <!-- СТАТУС -->
                                    <Border Background="{Binding StatusColor}" 
                                            CornerRadius="10" 
                                            Padding="5,2" 
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Status}" 
                                                   FontSize="11" 
                                                   FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </StackPanel>

                                <!-- ВТОРАЯ СТРОКА: Сумма + Категория -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="{Binding AmountFormatted}" 
                                               FontWeight="SemiBold"
                                               Foreground="{Binding Color}" 
                                               Margin="0,0,15,0"/>

                                    <TextBlock Text="{Binding Category}" 
                                               Foreground="#666"/>
                                </StackPanel>

                                <!-- ТРЕТЬЯ СТРОКА: Периодичность + Дата -->
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding RecurrenceText}" 
                                               Foreground="#666"/>

                                    <TextBlock Text=" • " 
                                               Foreground="#999" 
                                               Margin="5,0"/>

                                    <TextBlock Text="{Binding NextDateText, StringFormat='Следующий раз: {0}'}" 
                                               Foreground="#666"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- КНОПКИ -->
                            <StackPanel Grid.Column="1" 
                                        VerticalAlignment="Center"
                                        Margin="20,0,0,0">
                                <Button Content="✓" 
            Width="30" Height="30"
            Background="#4CAF50"
            Foreground="White"
            FontSize="12"
            Tag="{Binding Id}"
            Click="BtnProcess_Click"
            ToolTip="Выполнить сейчас"/>

                                <Button Content="✏️" 
            Width="30" Height="30"
            Background="#2196F3"
            Foreground="White"
            FontSize="12"
            Margin="0,5,0,0"
            Tag="{Binding Id}"
            Click="BtnEdit_Click"
            ToolTip="Редактировать"/>

                                <Button Content="🗑️" 
            Width="30" Height="30"
            Background="#F44336"
            Foreground="White"
            FontSize="12"
            Margin="0,5,0,0"
            Tag="{Binding Id}"
            Click="BtnDelete_Click"
            ToolTip="Удалить"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- КНОПКИ -->
        <Border Grid.Row="2" 
                Background="#F5F5F5" 
                Padding="15">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center">
                <Button x:Name="btnAdd"
                        Content="➕ Новый платеж" 
                        FontWeight="Bold"
                        Padding="15,8"
                        Background="#4CAF50"
                        Foreground="White"
                        Click="BtnAdd_Click"/>

                <Button Content="✓ Выполнить все" 
                        Padding="15,8"
                        Margin="10,0,0,0"
                        Background="Teal"
                        Foreground="White"
                        Click="BtnProcessAll_Click"/>

                <Button Content="✕ Закрыть" 
                        Padding="15,8"
                        Margin="10,0,0,0"
                        Click="BtnClose_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>